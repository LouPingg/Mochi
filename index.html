<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Mochi pics</title>
    <link rel="stylesheet" href="style.css" />
    <!-- favicon (facultatif, sinon 404 logique) -->
    <link rel="icon" href="assets/favicon.ico" />
    <!-- IMPORTANT: defer + cache-bust pour GitHub Pages -->
    <script src="./app.js?v=20251017" defer></script>
  </head>
  <body>
    <header class="site-header">
      <a href="#" id="home-link" aria-label="Retour à l'accueil">
        <img src="assets/logo.png" alt="Logo Mochi pics" class="logo" />
      </a>
    </header>

    <main class="container">
      <!-- Filtres -->
      <section class="filtres" aria-label="Filtrer la galerie">
        <button
          class="filter-btn is-active"
          type="button"
          data-filter="portrait"
        >
          Portraits
        </button>
        <button class="filter-btn" type="button" data-filter="landscape">
          Paysages
        </button>
      </section>

      <!-- Panneau admin -->
      <section
        id="admin-panel"
        class="admin hidden"
        aria-label="Panneau d'administration"
      >
        <!-- Connexion -->
        <form id="login-form" class="admin-box admin-logged-out">
          <h3>Connexion admin</h3>
          <div class="row">
            <label>Utilisateur</label>
            <input type="text" name="username" placeholder="admin" required />
          </div>
          <div class="row">
            <label>Mot de passe</label>
            <input
              type="password"
              name="password"
              placeholder="••••••••"
              required
            />
          </div>
          <button type="submit" class="btn">Se connecter</button>
          <small class="hint">Token Bearer (fallback) + Cookie HttpOnly</small>
        </form>

        <!-- Connecté -->
        <div class="admin-logged-in hidden">
          <div class="admin-actions">
            <form id="create-album-form" class="admin-box">
              <h3>Créer un album + 1ʳᵉ photo</h3>

              <div class="row">
                <label>Titre de l’album</label>
                <input
                  type="text"
                  name="title"
                  placeholder="Nom de l'album"
                  required
                />
              </div>

              <div class="row">
                <label>URL image (optionnel si fichier)</label>
                <input type="url" name="url" placeholder="https://..." />
              </div>

              <div class="row">
                <label>Ou choisir un fichier</label>
                <input type="file" name="file" accept="image/*" />
              </div>

              <div class="row">
                <label>Orientation (si URL)</label>
                <select name="orientation">
                  <option value="">Auto (si fichier)</option>
                  <option value="landscape">Paysage</option>
                  <option value="portrait">Portrait</option>
                </select>
              </div>

              <button type="submit" class="btn">Créer</button>
            </form>

            <div class="admin-box">
              <h3>Session</h3>
              <button id="logout-btn" class="btn btn-danger">
                Se déconnecter
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- Vue albums -->
      <section id="albums-view" class="gallerie" aria-label="Albums">
        <div id="albums-grid" class="grid"></div>
      </section>

      <!-- Vue photos -->
      <section
        id="photos-view"
        class="gallerie hidden"
        aria-label="Photos de l’album"
      >
        <div class="photos-header">
          <button id="back-to-albums" type="button">← Albums</button>
          <h2 id="album-title"></h2>
        </div>
        <div id="photos-grid" class="grid"></div>
      </section>

      <!-- Lightbox -->
      <div
        id="lightbox"
        class="lightbox hidden"
        role="dialog"
        aria-modal="true"
        aria-label="Aperçu photo"
      >
        <button class="lb-btn lb-close" aria-label="Fermer">×</button>
        <button class="lb-btn lb-prev" aria-label="Précédente">‹</button>
        <img id="lightbox-image" src="" alt="Photo en grand" />
        <button class="lb-btn lb-next" aria-label="Suivante">›</button>
      </div>
    </main>

    <footer class="site-footer">
      <img src="assets/footer.png" alt="Bannière décorative du bas de page" />
    </footer>
  </body>
</html>
